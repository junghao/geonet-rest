package msg

import (
	"fmt"
	"sort"
	"testing"
)

func TestUATags(t *testing.T) {
	expectedTags := []string{
		`mag3_depth15`,
		`mag3_depth40`,
		`mag3_depth100`,
		`mag3_depth200`,
		`mag3_depth`,
		`mag4_depth15`,
		`mag4_depth40`,
		`mag4_depth100`,
		`mag4_depth200`,
		`mag4_depth`,
		`mag5_depth15`,
		`mag5_depth40`,
		`mag5_depth100`,
		`mag5_depth200`,
		`mag5_depth`,
		`mag6_depth15`,
		`mag6_depth40`,
		`mag6_depth100`,
		`mag6_depth200`,
		`mag6_depth`,
		`weak@all_locations`,
		`light@all_locations`,
		`moderate@all_locations`,
		`strong@all_locations`,
		`severe@all_locations`,
		`weak@ashburton`,
		`severe@blenheim`,
		`strong@blenheim`,
		`moderate@blenheim`,
		`light@blenheim`,
		`weak@blenheim`,
		`weak@cambridge`,
		`light@christchurch`,
		`weak@christchurch`,
		`moderate@feilding`,
		`light@feilding`,
		`weak@feilding`,
		`light@greymouth`,
		`weak@greymouth`,
		`weak@hastings`,
		`light@hawera`,
		`weak@hawera`,
		`moderate@levin`,
		`light@levin`,
		`weak@levin`,
		`moderate@masterton`,
		`light@masterton`,
		`weak@masterton`,
		`weak@napier`,
		`strong@nelson`,
		`moderate@nelson`,
		`light@nelson`,
		`weak@nelson`,
		`light@new_plymouth`,
		`weak@new_plymouth`,
		`moderate@palmerston_north`,
		`light@palmerston_north`,
		`weak@palmerston_north`,
		`strong@paraparaumu`,
		`moderate@paraparaumu`,
		`light@paraparaumu`,
		`weak@paraparaumu`,
		`weak@rotorua`,
		`weak@taupo`,
		`weak@te_awamutu`,
		`weak@timaru`,
		`weak@tokoroa`,
		`light@whanganui`,
		`weak@whanganui`,
		`severe@wellington`,
		`strong@wellington`,
		`moderate@wellington`,
		`light@wellington`,
		`weak@wellington`,
		`weak@171.0e44.5s`,
		`weak@171.5e44.5s`,
		`weak@172.0e44.5s`,
		`weak@170.5e44.0s`,
		`weak@171.0e44.0s`,
		`weak@171.5e44.0s`,
		`weak@172.0e44.0s`,
		`weak@172.5e44.0s`,
		`light@173.0e44.0s`,
		`weak@173.0e44.0s`,
		`light@173.5e44.0s`,
		`weak@173.5e44.0s`,
		`weak@170.0e43.5s`,
		`weak@170.5e43.5s`,
		`weak@171.0e43.5s`,
		`weak@171.5e43.5s`,
		`light@172.0e43.5s`,
		`weak@172.0e43.5s`,
		`light@172.5e43.5s`,
		`weak@172.5e43.5s`,
		`light@173.0e43.5s`,
		`weak@173.0e43.5s`,
		`light@173.5e43.5s`,
		`weak@173.5e43.5s`,
		`weak@169.5e43.0s`,
		`weak@170.0e43.0s`,
		`weak@170.5e43.0s`,
		`weak@171.0e43.0s`,
		`light@171.5e43.0s`,
		`weak@171.5e43.0s`,
		`light@172.0e43.0s`,
		`weak@172.0e43.0s`,
		`light@172.5e43.0s`,
		`weak@172.5e43.0s`,
		`moderate@173.0e43.0s`,
		`light@173.0e43.0s`,
		`weak@173.0e43.0s`,
		`moderate@173.5e43.0s`,
		`light@173.5e43.0s`,
		`weak@173.5e43.0s`,
		`moderate@174.0e43.0s`,
		`light@174.0e43.0s`,
		`weak@174.0e43.0s`,
		`weak@170.5e42.5s`,
		`light@171.0e42.5s`,
		`weak@171.0e42.5s`,
		`light@171.5e42.5s`,
		`weak@171.5e42.5s`,
		`light@172.0e42.5s`,
		`weak@172.0e42.5s`,
		`moderate@172.5e42.5s`,
		`light@172.5e42.5s`,
		`weak@172.5e42.5s`,
		`moderate@173.0e42.5s`,
		`light@173.0e42.5s`,
		`weak@173.0e42.5s`,
		`moderate@173.5e42.5s`,
		`light@173.5e42.5s`,
		`weak@173.5e42.5s`,
		`strong@174.0e42.5s`,
		`moderate@174.0e42.5s`,
		`light@174.0e42.5s`,
		`weak@174.0e42.5s`,
		`light@171.0e42.0s`,
		`weak@171.0e42.0s`,
		`light@171.5e42.0s`,
		`weak@171.5e42.0s`,
		`light@172.0e42.0s`,
		`weak@172.0e42.0s`,
		`moderate@172.5e42.0s`,
		`light@172.5e42.0s`,
		`weak@172.5e42.0s`,
		`moderate@173.0e42.0s`,
		`light@173.0e42.0s`,
		`weak@173.0e42.0s`,
		`strong@173.5e42.0s`,
		`moderate@173.5e42.0s`,
		`light@173.5e42.0s`,
		`weak@173.5e42.0s`,
		`severe@174.0e42.0s`,
		`strong@174.0e42.0s`,
		`moderate@174.0e42.0s`,
		`light@174.0e42.0s`,
		`weak@174.0e42.0s`,
		`severe@174.5e42.0s`,
		`strong@174.5e42.0s`,
		`moderate@174.5e42.0s`,
		`light@174.5e42.0s`,
		`weak@174.5e42.0s`,
		`strong@175.0e42.0s`,
		`moderate@175.0e42.0s`,
		`light@175.0e42.0s`,
		`weak@175.0e42.0s`,
		`strong@175.5e42.0s`,
		`moderate@175.5e42.0s`,
		`light@175.5e42.0s`,
		`weak@175.5e42.0s`,
		`light@171.5e41.5s`,
		`weak@171.5e41.5s`,
		`light@172.0e41.5s`,
		`weak@172.0e41.5s`,
		`moderate@172.5e41.5s`,
		`light@172.5e41.5s`,
		`weak@172.5e41.5s`,
		`moderate@173.0e41.5s`,
		`light@173.0e41.5s`,
		`weak@173.0e41.5s`,
		`strong@173.5e41.5s`,
		`moderate@173.5e41.5s`,
		`light@173.5e41.5s`,
		`weak@173.5e41.5s`,
		`severe@174.0e41.5s`,
		`strong@174.0e41.5s`,
		`moderate@174.0e41.5s`,
		`light@174.0e41.5s`,
		`weak@174.0e41.5s`,
		`severe@174.5e41.5s`,
		`strong@174.5e41.5s`,
		`moderate@174.5e41.5s`,
		`light@174.5e41.5s`,
		`weak@174.5e41.5s`,
		`strong@175.0e41.5s`,
		`moderate@175.0e41.5s`,
		`light@175.0e41.5s`,
		`weak@175.0e41.5s`,
		`strong@175.5e41.5s`,
		`moderate@175.5e41.5s`,
		`light@175.5e41.5s`,
		`weak@175.5e41.5s`,
		`moderate@176.0e41.5s`,
		`light@176.0e41.5s`,
		`weak@176.0e41.5s`,
		`light@171.5e41.0s`,
		`weak@171.5e41.0s`,
		`light@172.0e41.0s`,
		`weak@172.0e41.0s`,
		`moderate@172.5e41.0s`,
		`light@172.5e41.0s`,
		`weak@172.5e41.0s`,
		`moderate@173.0e41.0s`,
		`light@173.0e41.0s`,
		`weak@173.0e41.0s`,
		`strong@173.5e41.0s`,
		`moderate@173.5e41.0s`,
		`light@173.5e41.0s`,
		`weak@173.5e41.0s`,
		`strong@174.0e41.0s`,
		`moderate@174.0e41.0s`,
		`light@174.0e41.0s`,
		`weak@174.0e41.0s`,
		`strong@174.5e41.0s`,
		`moderate@174.5e41.0s`,
		`light@174.5e41.0s`,
		`weak@174.5e41.0s`,
		`strong@175.0e41.0s`,
		`moderate@175.0e41.0s`,
		`light@175.0e41.0s`,
		`weak@175.0e41.0s`,
		`moderate@175.5e41.0s`,
		`light@175.5e41.0s`,
		`weak@175.5e41.0s`,
		`moderate@176.0e41.0s`,
		`light@176.0e41.0s`,
		`weak@176.0e41.0s`,
		`light@176.5e41.0s`,
		`weak@176.5e41.0s`,
		`light@172.0e40.5s`,
		`weak@172.0e40.5s`,
		`light@172.5e40.5s`,
		`weak@172.5e40.5s`,
		`moderate@173.0e40.5s`,
		`light@173.0e40.5s`,
		`weak@173.0e40.5s`,
		`moderate@173.5e40.5s`,
		`light@173.5e40.5s`,
		`weak@173.5e40.5s`,
		`moderate@174.0e40.5s`,
		`light@174.0e40.5s`,
		`weak@174.0e40.5s`,
		`moderate@174.5e40.5s`,
		`light@174.5e40.5s`,
		`weak@174.5e40.5s`,
		`moderate@175.0e40.5s`,
		`light@175.0e40.5s`,
		`weak@175.0e40.5s`,
		`moderate@175.5e40.5s`,
		`light@175.5e40.5s`,
		`weak@175.5e40.5s`,
		`moderate@176.0e40.5s`,
		`light@176.0e40.5s`,
		`weak@176.0e40.5s`,
		`light@176.5e40.5s`,
		`weak@176.5e40.5s`,
		`light@177.0e40.5s`,
		`weak@177.0e40.5s`,
		`moderate@174.0e40.0s`,
		`light@174.0e40.0s`,
		`weak@174.0e40.0s`,
		`moderate@174.5e40.0s`,
		`light@174.5e40.0s`,
		`weak@174.5e40.0s`,
		`moderate@175.0e40.0s`,
		`light@175.0e40.0s`,
		`weak@175.0e40.0s`,
		`light@175.5e40.0s`,
		`weak@175.5e40.0s`,
		`light@176.0e40.0s`,
		`weak@176.0e40.0s`,
		`light@176.5e40.0s`,
		`weak@176.5e40.0s`,
		`light@177.0e40.0s`,
		`weak@177.0e40.0s`,
		`weak@177.5e40.0s`,
		`light@173.5e39.5s`,
		`weak@173.5e39.5s`,
		`light@174.0e39.5s`,
		`weak@174.0e39.5s`,
		`light@174.5e39.5s`,
		`weak@174.5e39.5s`,
		`light@175.0e39.5s`,
		`weak@175.0e39.5s`,
		`light@175.5e39.5s`,
		`weak@175.5e39.5s`,
		`light@176.0e39.5s`,
		`weak@176.0e39.5s`,
		`light@176.5e39.5s`,
		`weak@176.5e39.5s`,
		`weak@177.0e39.5s`,
		`weak@177.5e39.5s`,
		`weak@178.0e39.5s`,
		`weak@178.5e39.5s`,
		`light@173.5e39.0s`,
		`weak@173.5e39.0s`,
		`light@174.0e39.0s`,
		`weak@174.0e39.0s`,
		`light@174.5e39.0s`,
		`weak@174.5e39.0s`,
		`light@175.0e39.0s`,
		`weak@175.0e39.0s`,
		`weak@175.5e39.0s`,
		`weak@176.0e39.0s`,
		`weak@176.5e39.0s`,
		`weak@177.0e39.0s`,
		`weak@177.5e39.0s`,
		`weak@178.0e39.0s`,
		`weak@174.0e38.5s`,
		`weak@174.5e38.5s`,
		`weak@175.0e38.5s`,
		`weak@175.5e38.5s`,
		`weak@176.0e38.5s`,
		`weak@176.5e38.5s`,
		`weak@177.0e38.5s`,
		`weak@174.5e38.0s`,
		`weak@175.0e38.0s`,
		`weak@175.5e38.0s`,
		`weak@176.0e38.0s`,
	}

	q := Quake{
		Magnitude: 6.5,
		Depth:     13.0,
		Longitude: 174.33,
		Latitude:  -41.60,
	}

	tags := q.uaTags()

	sort.Strings(tags)
	sort.Strings(expectedTags)

	if fmt.Sprintf("%v", expectedTags) != fmt.Sprintf("%v", tags) {
		t.Error("Didn't get expected tags")
	}

	q.Magnitude = 3.2
	q.Depth = 32.0

	expectedTags = []string{
		`mag3_depth40`, `mag3_depth100`, `mag3_depth200`, `mag3_depth`,
		`weak@all_locations`, `weak@blenheim`, `weak@174.0e41.5s`, `weak@174.5e41.5s`,
	}

	tags = q.uaTags()

	sort.Strings(tags)
	sort.Strings(expectedTags)

	if fmt.Sprintf("%v", expectedTags) != fmt.Sprintf("%v", tags) {
		t.Error("Didn't get expected tags")
	}

	q.Depth = 105.0
	q.Magnitude = 3.2

	expectedTags = []string{
		`mag3_depth200`,
		`mag3_depth`,
	}

	tags = q.uaTags()

	sort.Strings(tags)
	sort.Strings(expectedTags)

	if fmt.Sprintf("%v", expectedTags) != fmt.Sprintf("%v", tags) {
		t.Error("Didn't get expected tags")
	}

	q.Depth = 105.0
	q.Magnitude = 2.2

	expectedTags = []string{}

	tags = q.uaTags()

	sort.Strings(tags)
	sort.Strings(expectedTags)

	if fmt.Sprintf("%v", expectedTags) != fmt.Sprintf("%v", tags) {
		t.Error("Didn't get expected tags")
	}
}
